{
  "id": "site.json",
  "$schema": "http://json-schema.org/draft-04/schema",
  "title": "Site",
  "description": "Grid site",
  "type": "object",
  "properties": {
    "id": {
      "description": "Unique identifier",
      "format": "uuid",
      "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$",
      "example": "01234567-89ab-cdef-0123-456789abcdef",
      "type": "string"
    },
    "name": {
      "type": "string",
      "description": "User-readable name of the website"
    },
    "repo": {
      "type": "string",
      "description": "GitHub repository path for website sources"
    },
    "domain": {
      "type": "string",
      "description": "Custom domain for the website, if any"
    },
    "path": {
      "type": "string",
      "description": "Subdirectory path for the website, if any"
    },
    "config": {
      "id": "siteconfig.json",
      "$schema": "http://json-schema.org/draft-04/schema",
      "title": "Site config",
      "description": "Configuration of a single site",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "Website name"
        },
        "title": {
          "type": "string",
          "description": "Website title"
        },
        "description": {
          "type": "string",
          "description": "Website tagline"
        },
        "style": {
          "type": "string",
          "description": "Layout filter selected for the site",
          "example": "taylor",
          "default": "taylor"
        },
        "favicon": {
          "type": "string",
          "description": "Favicon URL"
        },
        "logo": {
          "type": "string",
          "description": "SVG logo URL"
        },
        "cta": {
          "type": "object",
          "required": [
            "version"
          ],
          "properties": {
            "domain": {
              "name": "domain",
              "description": "CDN to serve the CtA from",
              "type": "string"
            },
            "bucket": {
              "name": "bucket",
              "description": "S3 bucket to serve the CtA from",
              "type": "string"
            },
            "version": {
              "name": "version",
              "description": "CtA version to use on site",
              "type": "string",
              "example": "1.0.0"
            }
          }
        },
        "analytics": {
          "type": "object",
          "properties": {
            "google": {
              "name": "google",
              "type": "string",
              "description": "Google Analytics ID for the site"
            },
            "facebook": {
              "name": "facebook",
              "type": "string",
              "description": "Facebook tracking ID for the site"
            },
            "twitter": {
              "name": "twitter",
              "type": "string",
              "description": "Twitter tracking ID for the site"
            }
          }
        },
        "image_filters": {
          "type": "object",
          "properties": {
            "server": {
              "type": "string",
              "description": "URL to the imgflo.org server"
            },
            "key": {
              "type": "string",
              "description": "imgflo API key"
            },
            "secret": {
              "type": "string",
              "description": "imgflo API secret"
            },
            "required": [
              "server",
              "key",
              "secret"
            ]
          }
        },
        "opengraph": {
          "type": "object",
          "required": [
            "type",
            "image"
          ],
          "properties": {
            "image": {
              "name": "image",
              "description": "Default image to use when sharing the website",
              "type": "string"
            },
            "type": {
              "name": "type",
              "description": "Type of the website",
              "type": "string"
            },
            "appId": {
              "name": "appId",
              "type": "string",
              "description": "Facebook App ID associated with the site"
            }
          }
        },
        "content_rating": {
          "type": "object",
          "properties": {
            "adult": {
              "name": "adult",
              "description": "Whether the site contains adult content",
              "type": "boolean"
            }
          }
        },
        "collections": {
          "type": "array",
          "minItems": 1,
          "uniqueItems": true,
          "items": {
            "id": "collection.json",
            "$schema": "http://json-schema.org/draft-04/schema",
            "title": "Content collection configuration",
            "description": "",
            "definitions": {
              "filtertag": {
                "name": "tag",
                "type": "object",
                "properties": {
                  "tag": {
                    "name": "tag",
                    "type": "string"
                  }
                },
                "required": [
                  "tag"
                ]
              },
              "filternottag": {
                "name": "notTag",
                "type": "object",
                "properties": {
                  "tag": {
                    "name": "tag",
                    "type": "string"
                  }
                },
                "required": [
                  "tag"
                ]
              }
            },
            "type": "object",
            "properties": {
              "filter": {
                "type": "object",
                "properties": {
                  "tag": {
                    "name": "tag",
                    "type": "object",
                    "properties": {
                      "tag": {
                        "name": "tag",
                        "type": "string"
                      }
                    },
                    "required": [
                      "tag"
                    ]
                  },
                  "notTag": {
                    "name": "notTag",
                    "type": "object",
                    "properties": {
                      "tag": {
                        "name": "tag",
                        "type": "string"
                      }
                    },
                    "required": [
                      "tag"
                    ]
                  }
                },
                "anyOf": [
                  {
                    "required": [
                      "tag"
                    ]
                  },
                  {
                    "required": [
                      "notTag"
                    ]
                  }
                ]
              },
              "index": {
                "type": "object"
              }
            }
          }
        },
        "color": {
          "type": "object",
          "properties": {
            "brandColors": {
              "type": "array",
              "default": [],
              "items": {
                "description": "#RGB color",
                "format": "rgbhexcolor",
                "pattern": "^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$",
                "example": "#aa33cc",
                "type": "string"
              },
              "description": "The user-selected brand colors for the site"
            },
            "brandStrength": {
              "type": "number",
              "default": 0,
              "minimum": 0,
              "maximum": 1,
              "description": "How strongly to tend towards brandColors, as opposed to content colors (adaptive)"
            },
            "lightness": {
              "type": "number",
              "default": 0.5,
              "minimum": 0,
              "maximum": 1
            },
            "saturation": {
              "type": "number",
              "default": 0.5,
              "minimum": 0,
              "maximum": 1
            },
            "rhythmicContrast": {
              "description": "The amount of color variation",
              "type": "number",
              "default": 0.5,
              "minimum": 0,
              "maximum": 1
            }
          }
        },
        "layout_spectrum": {
          "type": "number",
          "description": "",
          "default": 0.5,
          "minimum": 0,
          "maximum": 1
        },
        "typography_spectrum": {
          "type": "number",
          "description": "",
          "default": 0.5,
          "minimum": 0,
          "maximum": 1
        },
        "site_lang": {
          "type": "string",
          "description": "Primary site content langauge; ISO 693-1 format",
          "example": "ar",
          "default": "en"
        },
        "author": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "email": {
              "type": "string"
            },
            "url": {
              "type": "string"
            }
          }
        },
        "navigation": {
          "type": "array",
          "description": "External links to include in site navigation",
          "default": [],
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "description": "Name to show",
                "type": "string"
              },
              "url": {
                "description": "URL to link to",
                "type": "string"
              },
              "id": {
                "description": "Unique identifier",
                "format": "uuid",
                "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$",
                "example": "01234567-89ab-cdef-0123-456789abcdef",
                "type": "string"
              },
              "rel": {
                "description": "HTML link relation",
                "type": "string"
              }
            }
          }
        },
        "profiles": {
          "type": "array",
          "description": "Social media profile links associated with the site",
          "default": [],
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "description": "Name to show",
                "type": "string"
              },
              "url": {
                "description": "URL to link to",
                "type": "string"
              },
              "id": {
                "description": "Unique identifier",
                "format": "uuid",
                "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$",
                "example": "01234567-89ab-cdef-0123-456789abcdef",
                "type": "string"
              },
              "rel": {
                "description": "HTML link relation",
                "type": "string"
              }
            }
          }
        },
        "auto_approve": {
          "description": "Whether to publish site changes without design review",
          "type": "boolean"
        },
        "coverPrefs": {
          "name": "coverPrefs",
          "description": "Image processing to allow on the site. All default true.",
          "type": "object",
          "properties": {
            "filter": {
              "name": "filter",
              "type": "boolean",
              "description": "Allow image filtering",
              "example": true
            },
            "crop": {
              "name": "crop",
              "type": "boolean",
              "description": "Allow image cropping",
              "example": true
            },
            "overlay": {
              "name": "overlay",
              "type": "boolean",
              "description": "Allow image overlaying",
              "example": true
            }
          }
        },
        "purpose": {
          "description": "Site purposes",
          "type": "array",
          "minItems": 0,
          "uniqueItems": true,
          "items": {
            "id": "sitepurpose.json",
            "$schema": "http://json-schema.org/draft-04/schema",
            "title": "Site Purpose",
            "description": "Definition of a purpose for a website, with potential attached action",
            "type": [
              "object"
            ],
            "properties": {
              "type": {
                "description": "Type of the site purpose",
                "example": "purchase",
                "type": "string"
              },
              "label": {
                "description": "Textual label for the site purpose",
                "example": "Become a Founding Member",
                "type": "string"
              },
              "url": {
                "description": "External URL to link to",
                "type": "string"
              },
              "item": {
                "description": "Unique identifier",
                "format": "uuid",
                "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$",
                "example": "01234567-89ab-cdef-0123-456789abcdef",
                "type": "string"
              },
              "cta": {
                "description": "Unique identifier",
                "format": "uuid",
                "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$",
                "example": "01234567-89ab-cdef-0123-456789abcdef",
                "type": "string"
              },
              "price": {
                "description": "A tagged price, in USD cents",
                "example": "9600",
                "type": "string"
              }
            },
            "required": [
              "type"
            ]
          }
        },
        "content": {
          "description": "Site media content blocks",
          "type": "array",
          "minItems": 0,
          "uniqueItems": true,
          "items": {
            "id": "contentblock.json",
            "$schema": "http://json-schema.org/draft-04/schema",
            "title": "Content block",
            "description": "Any valid block of content like text, image or video",
            "definitions": {
              "type": {
                "description": "Block type",
                "example": "text",
                "type": "string",
                "enum": [
                  "headline",
                  "h1",
                  "h2",
                  "h3",
                  "h4",
                  "h5",
                  "h6",
                  "text",
                  "list",
                  "code",
                  "image",
                  "video",
                  "audio",
                  "article",
                  "quote",
                  "location",
                  "cta",
                  "interactive",
                  "hr",
                  "placeholder",
                  "unknown"
                ]
              },
              "html": {
                "description": "HTML content of the block",
                "example": "<p>Hello, world!</p>",
                "type": "string",
                "minLength": 7
              },
              "src": {
                "description": "Source URL",
                "example": "http://techcrunch.com/2015/04/15/mozilla-restructure/",
                "type": [
                  "string",
                  "null"
                ]
              }
            },
            "type": [
              "object"
            ],
            "properties": {
              "id": {
                "description": "Unique identifier",
                "format": "uuid",
                "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$",
                "example": "01234567-89ab-cdef-0123-456789abcdef",
                "type": "string"
              },
              "item": {
                "description": "Unique identifier",
                "format": "uuid",
                "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$",
                "example": "01234567-89ab-cdef-0123-456789abcdef",
                "type": "string"
              },
              "type": {
                "description": "Block type",
                "example": "text",
                "type": "string",
                "enum": [
                  "headline",
                  "h1",
                  "h2",
                  "h3",
                  "h4",
                  "h5",
                  "h6",
                  "text",
                  "list",
                  "code",
                  "image",
                  "video",
                  "audio",
                  "article",
                  "quote",
                  "location",
                  "cta",
                  "interactive",
                  "hr",
                  "placeholder",
                  "unknown"
                ]
              },
              "html": {
                "description": "HTML content of the block",
                "example": "<p>Hello, world!</p>",
                "type": "string",
                "minLength": 7
              },
              "src": {
                "description": "Source URL",
                "example": "http://techcrunch.com/2015/04/15/mozilla-restructure/",
                "type": [
                  "string",
                  "null"
                ]
              },
              "metadata": {
                "id": "metadata.json",
                "$schema": "http://json-schema.org/draft-04/schema",
                "title": "The Grid metadata definition",
                "description": "",
                "type": [
                  "object"
                ],
                "properties": {
                  "@type": {
                    "name": "@type",
                    "type": "string",
                    "description": "Schema.org type the item or block represents",
                    "example": "Article"
                  },
                  "isBasedOnUrl": {
                    "name": "isBasedOnUrl",
                    "type": "string",
                    "description": "Source URL for the item or block",
                    "example": "http://www.fastcolabs.com/3016289/how-an-arcane-coding-method-from-1970s-banking-software-could-save-the-sanity-of-web-develop"
                  },
                  "permalinkUrl": {
                    "name": "permalinkUrl",
                    "type": "string",
                    "description": "Custom permalink path for the item",
                    "example": "blog/my-cool-article.html"
                  },
                  "inLanguage": {
                    "name": "inLanguage",
                    "type": "string",
                    "description": "Content language",
                    "example": "en",
                    "minLength": 2
                  },
                  "starred": {
                    "type": "boolean",
                    "example": false
                  },
                  "keywords": {
                    "name": "keywords",
                    "description": "Tags describing the content",
                    "type": "array",
                    "uniqueItems": true,
                    "items": {
                      "type": "string"
                    },
                    "example": [
                      "design",
                      "blogs"
                    ]
                  },
                  "publisher": {
                    "name": "publisher",
                    "description": "Original publisher of the item or block",
                    "type": "object",
                    "properties": {
                      "name": {
                        "name": "name",
                        "type": "string",
                        "description": "Human-readable publisher name",
                        "example": "Fast Company"
                      },
                      "domain": {
                        "name": "domain",
                        "type": "string",
                        "description": "The publisher's domain name",
                        "example": "www.fastcompany.com"
                      },
                      "url": {
                        "name": "url",
                        "type": "string",
                        "description": "URL of the publisher's main page",
                        "example": "http://www.fastcompany.com/"
                      },
                      "favicon": {
                        "name": "favicon",
                        "type": "string",
                        "description": "URL of the publisher's favicon",
                        "example": "http://www.fastcompany.com/favicon.ico"
                      }
                    },
                    "additionalProperties": false
                  },
                  "via": {
                    "name": "via",
                    "description": "Publisher the item was discovered via",
                    "type": "object",
                    "properties": {
                      "name": {
                        "name": "name",
                        "type": "string",
                        "description": "Human-readable publisher name",
                        "example": "Bergie Today"
                      },
                      "domain": {
                        "name": "domain",
                        "type": "string",
                        "description": "The publisher's domain name",
                        "example": "bergie.today"
                      },
                      "url": {
                        "name": "url",
                        "type": "string",
                        "description": "Permalink URL the item was on or URL of the publisher's main page",
                        "example": "https://bergie.today/"
                      },
                      "favicon": {
                        "name": "favicon",
                        "type": "string",
                        "description": "URL of the publisher's favicon",
                        "example": "https://bergie.today/favicon.ico"
                      }
                    },
                    "additionalProperties": false
                  },
                  "author": {
                    "name": "author",
                    "type": "array",
                    "description": "Authors of the item or block",
                    "items": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "name": "name",
                          "type": "string",
                          "example": "Henri Bergius"
                        },
                        "url": {
                          "description": "Unique Resource Locator",
                          "format": "url",
                          "example": "http://thegrid.io",
                          "type": "string"
                        },
                        "email": {
                          "type": "string",
                          "format": "email",
                          "example": "bergie@iki.fi"
                        },
                        "avatar": {
                          "type": "object"
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "coverPrefs": {
                    "name": "coverPrefs",
                    "description": "Image processing to allow on the cover. All default true.",
                    "type": "object",
                    "properties": {
                      "filter": {
                        "name": "filter",
                        "type": "boolean",
                        "description": "Allow image filtering",
                        "example": true
                      },
                      "crop": {
                        "name": "crop",
                        "type": "boolean",
                        "description": "Allow image cropping",
                        "example": true
                      },
                      "overlay": {
                        "name": "overlay",
                        "type": "boolean",
                        "description": "Allow image overlaying",
                        "example": true
                      }
                    }
                  },
                  "geo": {
                    "type": "object",
                    "description": "Geographical data",
                    "properties": {
                      "latitude": {
                        "name": "latitude",
                        "type": "number",
                        "description": "Latitude coordinate",
                        "example": 45.5
                      },
                      "longitude": {
                        "name": "longitude",
                        "type": "number",
                        "description": "Longitude coordinate",
                        "example": -122.7
                      },
                      "zoom": {
                        "name": "zoom",
                        "type": "number",
                        "description": "Zoom level of map",
                        "example": 4
                      }
                    }
                  },
                  "address": {
                    "name": "address",
                    "type": "string",
                    "description": "Location address",
                    "example": "4242 Blue Street, San Francisco, CA"
                  },
                  "hasMap": {
                    "name": "hasMap",
                    "type": "url",
                    "description": "Map URL"
                  },
                  "additionalProperties": true
                }
              },
              "created_at": {
                "type": "number"
              },
              "updated_at": {
                "type": [
                  "number",
                  "null"
                ]
              },
              "anyOf": [
                "headline",
                "text",
                "cta",
                "media",
                "list"
              ]
            },
            "required": [
              "id",
              "item",
              "type",
              "html",
              "src"
            ]
          }
        }
      },
      "required": [
        "name"
      ]
    },
    "owner": {
      "description": "Unique identifier",
      "format": "uuid",
      "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$",
      "example": "01234567-89ab-cdef-0123-456789abcdef",
      "type": "string"
    },
    "favlogo": {
      "type": "string",
      "description": "URL of the website favlogo"
    }
  },
  "required": [
    "id",
    "name",
    "repo",
    "owner"
  ]
}