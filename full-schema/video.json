{
  "id": "video.json",
  "$schema": "http://json-schema.org/draft-04/schema",
  "title": "Video",
  "description": "An HTML video element which can have a cover image with annotated measurements data",
  "type": [
    "object"
  ],
  "properties": {
    "type": {
      "description": "Block type",
      "example": "image",
      "type": "string",
      "enum": [
        "video"
      ]
    },
    "video": {
      "description": "Unique Resource Locator",
      "format": "uri",
      "example": "http://thegrid.io",
      "type": "string"
    },
    "cover": {
      "description": "A cover image that has many details about the media, useful for previews",
      "type": [
        "object"
      ],
      "properties": {
        "src": {
          "description": "ImgFlo URL for the cover image. Caching is generally done by ImgFlo and this URL redirects the consumer to the cached URL. This URL preserves all the queries requested for the ImgFlo image processing graph",
          "type": "string",
          "example": "https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/6fe8db68da2dbcc38ba759348a5ba400/noop.png?input=http%3A%2F%2Fweb.archive.org%2Fweb%2F20130725203730%2Fhttp%3A%2F%2Fautomata.cc%2Fthumb-chuck-wiimote.png"
        },
        "original": {
          "description": "Original URL, no matter if it's a salvaged media or not, this property stores the URL shared/uploaded to TheGrid at the first time",
          "type": "string",
          "example": "http://automata.cc/thumb-chuck-wiimote.png"
        },
        "altsrc": {
          "description": "Alternative URL, if the image has a fullscale URL, the original URL will be stored here",
          "type": "string",
          "example": "https://farm8.staticflickr.com/7614/17055279932_6e242fddd5.jpg"
        },
        "imgflosrc": {
          "description": "ImgFlo'ed URL",
          "type": "string",
          "example": "https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/6fe8db68da2dbcc38ba759348a5ba400/noop.png?input=http%3A%2F%2Fweb.archive.org%2Fweb%2F20130725203730%2Fhttp%3A%2F%2Fautomata.cc%2Fthumb-chuck-wiimote.png"
        },
        "resized": {
          "description": "URL to image resized by Caliper and used by its preprocess and feature extract workers. In other words, that is the image Caliper really process and extract features from",
          "type": "string",
          "example": "http://caliper-tests.s3-us-west-2.amazonaws.com/caliper-resized/87abee46986c09f0b721f73dd309ed99.png"
        },
        "ratio": {
          "description": "Cover image ratio",
          "type": "string",
          "example": "128:101"
        },
        "aspect": {
          "description": "Calculated image ratio",
          "type": "number",
          "example": 1.2673267326732673
        },
        "orientation": {
          "description": "Cover image orientation based on image ratio. If image ration equals 1:1 then its orientation is square. If image's width is larger than its height then its orientation is landscape. If image's height is larger than its width then its orientation is portrait",
          "type": "string",
          "enum": [
            "landscape",
            "portrait",
            "square"
          ],
          "example": "landscape"
        },
        "width": {
          "description": "Cover image width",
          "type": "integer",
          "example": 1024
        },
        "height": {
          "description": "Cover image height",
          "type": "integer",
          "example": 808
        },
        "rotation": {
          "description": "Rotation performed by AI using auto-rotate based on EXIF or user preference",
          "type": "integer",
          "example": 90
        },
        "animated": {
          "description": "Is GIF animated?",
          "type": "boolean"
        },
        "unsalvageable": {
          "description": "Is media unsalvageable a.k.a cannot be rescued on Archive or other mirror?",
          "type": "boolean"
        },
        "faces": {
          "description": "Extracted faces from the image",
          "type": "array",
          "items": {
            "description": "Bounding box of a detected face",
            "allOf": [
              {
                "type": "object",
                "properties": {
                  "x": {
                    "name": "x",
                    "type": "number",
                    "description": "Cartesian coordinate along x-axis",
                    "example": 608.1907
                  },
                  "y": {
                    "name": "y",
                    "type": "number",
                    "description": "Cartesian coordinate along y-axis",
                    "example": 189.909
                  },
                  "width": {
                    "name": "width",
                    "type": "number",
                    "description": "Width",
                    "example": 229.2087
                  },
                  "height": {
                    "name": "height",
                    "type": "number",
                    "description": "Height",
                    "example": 229.2087
                  }
                }
              }
            ],
            "properties": {
              "confidence": {
                "description": "How much an extracted feature should be considered as a true positive",
                "type": "number",
                "example": 5.08
              }
            }
          }
        },
        "colors": {
          "description": "Extracted colors from the image, represented as an array of at least 5 RGB colors",
          "type": "array",
          "items": {
            "type": "array",
            "description": "Tuple of RGB values representing a color",
            "items": [
              {
                "type": "number",
                "description": "Red channel",
                "example": 255
              },
              {
                "type": "number",
                "description": "Green channel",
                "example": 200
              },
              {
                "type": "number",
                "description": "Blue channel",
                "example": 190
              }
            ]
          },
          "minItens": 5
        },
        "saliency": {
          "description": "Extracted salient region from an image",
          "type": "object",
          "properties": {
            "bbox": {
              "type": "object",
              "properties": {
                "x": {
                  "name": "x",
                  "type": "number",
                  "description": "Cartesian coordinate along x-axis",
                  "example": 608.1907
                },
                "y": {
                  "name": "y",
                  "type": "number",
                  "description": "Cartesian coordinate along y-axis",
                  "example": 189.909
                },
                "width": {
                  "name": "width",
                  "type": "number",
                  "description": "Width",
                  "example": 229.2087
                },
                "height": {
                  "name": "height",
                  "type": "number",
                  "description": "Height",
                  "example": 229.2087
                }
              }
            },
            "confidence": {
              "description": "How much an extracted feature should be considered as a true positive",
              "type": "number",
              "example": 5.08
            },
            "regions": {
              "description": "Extracted salient regions",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "bbox": {
                    "type": "object",
                    "properties": {
                      "x": {
                        "name": "x",
                        "type": "number",
                        "description": "Cartesian coordinate along x-axis",
                        "example": 608.1907
                      },
                      "y": {
                        "name": "y",
                        "type": "number",
                        "description": "Cartesian coordinate along y-axis",
                        "example": 189.909
                      },
                      "width": {
                        "name": "width",
                        "type": "number",
                        "description": "Width",
                        "example": 229.2087
                      },
                      "height": {
                        "name": "height",
                        "type": "number",
                        "description": "Height",
                        "example": 229.2087
                      }
                    }
                  },
                  "center": {
                    "description": "Cartesian coordinate",
                    "type": "object",
                    "properties": {
                      "x": {
                        "name": "x",
                        "type": "number",
                        "description": "Value on x-axis",
                        "example": 4.2
                      },
                      "y": {
                        "name": "y",
                        "type": "number",
                        "description": "Value on y-axis",
                        "example": 2.4
                      }
                    }
                  },
                  "radius": {
                    "type": "number"
                  },
                  "polygon": {
                    "description": "Coordinates of a polygon shape",
                    "type": "array",
                    "items": {
                      "description": "Cartesian coordinate",
                      "type": "object",
                      "properties": {
                        "x": {
                          "name": "x",
                          "type": "number",
                          "description": "Value on x-axis",
                          "example": 4.2
                        },
                        "y": {
                          "name": "y",
                          "type": "number",
                          "description": "Value on y-axis",
                          "example": 2.4
                        }
                      }
                    }
                  }
                }
              }
            },
            "polygon": {
              "description": "Coordinates of a 2D polygon shape (warning: to be deprecated by `polygon`)",
              "type": "array",
              "items": {
                "description": "Coordinate in a 2D plane (warning: to be deprecated by `point`)",
                "type": "array",
                "items": [
                  {
                    "type": "number",
                    "description": "Value on x-axis"
                  },
                  {
                    "type": "number",
                    "description": "Value on y-axis"
                  }
                ]
              }
            },
            "center": {
              "description": "Coordinate in a 2D plane (warning: to be deprecated by `point`)",
              "type": "array",
              "items": [
                {
                  "type": "number",
                  "description": "Value on x-axis"
                },
                {
                  "type": "number",
                  "description": "Value on y-axis"
                }
              ]
            },
            "radius": {
              "description": "Radius of the circle around the salient region (warning: to be deprecated by `regions` radius)",
              "type": "number",
              "example": 108.079
            },
            "bounding_rect": {
              "description": "Coordinates of a 2D rectangle shape (warning: to be deprecated by `bbox`)",
              "type": "array",
              "items": [
                {
                  "description": "Coordinate in a 2D plane (warning: to be deprecated by `point`)",
                  "type": "array",
                  "items": [
                    {
                      "type": "number",
                      "description": "Value on x-axis"
                    },
                    {
                      "type": "number",
                      "description": "Value on y-axis"
                    }
                  ]
                },
                {
                  "description": "Coordinate in a 2D plane (warning: to be deprecated by `point`)",
                  "type": "array",
                  "items": [
                    {
                      "type": "number",
                      "description": "Value on x-axis"
                    },
                    {
                      "type": "number",
                      "description": "Value on y-axis"
                    }
                  ]
                }
              ]
            }
          }
        },
        "histogram": {
          "description": "Histogram of color levels",
          "type": "object",
          "properties": {
            "r": {
              "name": "r",
              "type": "array",
              "description": "Red channel histogram",
              "items": {
                "type": "number"
              }
            },
            "g": {
              "name": "g",
              "type": "array",
              "description": "Green channel histogram",
              "items": {
                "type": "number"
              }
            },
            "b": {
              "name": "b",
              "type": "array",
              "description": "Blue channel histogram",
              "items": {
                "type": "number"
              }
            },
            "a": {
              "name": "a",
              "type": "array",
              "description": "Alpha channel histogram",
              "items": {
                "type": "number"
              }
            },
            "y": {
              "name": "y",
              "type": "array",
              "description": "Y histogram (CIE Y Rec. 601)",
              "items": {
                "type": "number"
              }
            },
            "h": {
              "name": "h",
              "type": "array",
              "description": "Hue histogram (CIE LCH or HSL)",
              "items": {
                "type": "number"
              }
            },
            "s": {
              "name": "s",
              "type": "array",
              "description": "Saturation histogram (CIE LCH or HSL)",
              "items": {
                "type": "number"
              }
            },
            "l": {
              "name": "l",
              "type": "array",
              "description": "Lightness histogram (CIE LCH or HSL)",
              "items": {
                "type": "number"
              }
            },
            "c": {
              "name": "c",
              "type": "array",
              "description": "Chroma histogram (CIE LCH or HSL)"
            }
          }
        },
        "exif": {
          "description": "EXIF metadata. A more comprehensive list of available EXIF attributes can be found at http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/EXIF.html",
          "type": "object",
          "properties": {
            "exif": {
              "name": "exif",
              "type": "object",
              "properties": {
                "image": {
                  "name": "image",
                  "type": "object",
                  "description": "Image information data (IFD0)",
                  "example": {
                    "Make": "FUJIFILM",
                    "Model": "FinePix40i",
                    "Orientation": 1,
                    "XResolution": 72,
                    "YResolution": 72,
                    "ResolutionUnit": 2,
                    "Software": "Digital Camera FinePix40i Ver1.39",
                    "ModifyDate": "2000:08:04 18:22:57",
                    "YCbCrPositioning": 2,
                    "ExifOffset": 250
                  }
                },
                "thumbnail": {
                  "name": "thumbnail",
                  "type": "object",
                  "description": "Information regarding a possibly embedded thumbnail (IFD1)",
                  "example": {
                    "Compression": 6,
                    "Orientation": 1,
                    "XResolution": 72,
                    "YResolution": 72,
                    "ResolutionUnit": 2,
                    "ThumbnailOffset": 1074,
                    "ThumbnailLength": 8691,
                    "YCbCrPositioning": 2
                  }
                },
                "exif": {
                  "name": "exif",
                  "type": "object",
                  "description": "Exif-specific attribute information (Exif IFD)",
                  "example": {
                    "FNumber": 2.8,
                    "ExposureProgram": 2,
                    "ISO": 200,
                    "DateTimeOriginal": "2000:08:04 18:22:57",
                    "CreateDate": "2000:08:04 18:22:57",
                    "CompressedBitsPerPixel": 1.5,
                    "ShutterSpeedValue": 5.5,
                    "ApertureValue": 3,
                    "BrightnessValue": 0.26,
                    "ExposureCompensation": 0,
                    "MaxApertureValue": 3,
                    "MeteringMode": 5,
                    "Flash": 1,
                    "FocalLength": 8.7,
                    "ColorSpace": 1,
                    "ExifImageWidth": 2400,
                    "ExifImageHeight": 1800,
                    "InteropOffset": 926,
                    "FocalPlaneXResolution": 2381,
                    "FocalPlaneYResolution": 2381,
                    "FocalPlaneResolutionUnit": 3,
                    "SensingMethod": 2
                  }
                },
                "gps": {
                  "name": "gps",
                  "type": "object",
                  "description": "GPS information (GPS IFD)"
                },
                "interoperability": {
                  "name": "interoperability",
                  "type": "object",
                  "description": "Interoperability information (Interoperability IFD)",
                  "example": {
                    "InteropIndex": "R98"
                  }
                },
                "makernote": {
                  "name": "makernote",
                  "type": "object",
                  "description": "Vendor specific Exif information (Makernotes)",
                  "example": {
                    "Quality": "NORMAL",
                    "Sharpness": 3,
                    "WhiteBalance": 0,
                    "FujiFlashMode": 1,
                    "FlashExposureComp": 0,
                    "Macro": 0,
                    "FocusMode": 0,
                    "SlowSync": 0,
                    "AutoBracketing": 0,
                    "BlurWarning": 0,
                    "FocusWarning": 0,
                    "ExposureWarning": 0
                  }
                }
              }
            }
          }
        },
        "anyOf": {
          "id": "helpermeasurements.json",
          "$schema": "http://json-schema.org/draft-04/schema",
          "title": "HelperMeasurements",
          "description": "Measurements calculated by TheGrid's data-helper",
          "definitions": {
            "scene": {
              "description": "Defines the most important region of an image. It is calculated based on other information like salient or text regions, faces and image dimensions.",
              "type": "object",
              "properties": {
                "bbox": {
                  "type": "object",
                  "properties": {
                    "x": {
                      "name": "x",
                      "type": "number",
                      "description": "Cartesian coordinate along x-axis",
                      "example": 608.1907
                    },
                    "y": {
                      "name": "y",
                      "type": "number",
                      "description": "Cartesian coordinate along y-axis",
                      "example": 189.909
                    },
                    "width": {
                      "name": "width",
                      "type": "number",
                      "description": "Width",
                      "example": 229.2087
                    },
                    "height": {
                      "name": "height",
                      "type": "number",
                      "description": "Height",
                      "example": 229.2087
                    }
                  }
                },
                "center": {
                  "description": "Cartesian coordinate",
                  "type": "object",
                  "properties": {
                    "x": {
                      "name": "x",
                      "type": "number",
                      "description": "Value on x-axis",
                      "example": 4.2
                    },
                    "y": {
                      "name": "y",
                      "type": "number",
                      "description": "Value on y-axis",
                      "example": 2.4
                    }
                  }
                }
              }
            },
            "lines": {
              "description": "This measurement/feature/heuristics takes inspiration from the Rule of Thirds, a well known \"rule of thumb\" in visual composing. Lines are bounding boxes that represent negative spaces as columns or rows around cover's scene. We can overlay content (e.g. text) in space columns or rows around the scene. We also associate a direction to a line, defining the direction we should place content ('horizontal' or 'vertical'). We calculate lines for each image that has scene",
              "type": "object",
              "properties": {
                "lines": {
                  "name": "lines",
                  "type": "object",
                  "properties": {
                    "direction": {
                      "description": "Direction we should place content",
                      "type": "string",
                      "enum": [
                        "horizontal",
                        "vertical"
                      ]
                    },
                    "stripes": {
                      "description": "Rows or columns representing 3, 2 or 1-stripes around the scene and the scene itself",
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "name": "type",
                            "description": "A negative space or the scene",
                            "type": "string",
                            "enum": [
                              "space",
                              "scene"
                            ]
                          },
                          "bbox": {
                            "type": "object",
                            "properties": {
                              "x": {
                                "name": "x",
                                "type": "number",
                                "description": "Cartesian coordinate along x-axis",
                                "example": 608.1907
                              },
                              "y": {
                                "name": "y",
                                "type": "number",
                                "description": "Cartesian coordinate along y-axis",
                                "example": 189.909
                              },
                              "width": {
                                "name": "width",
                                "type": "number",
                                "description": "Width",
                                "example": 229.2087
                              },
                              "height": {
                                "name": "height",
                                "type": "number",
                                "description": "Height",
                                "example": 229.2087
                              }
                            }
                          },
                          "center": {
                            "description": "Cartesian coordinate",
                            "type": "object",
                            "properties": {
                              "x": {
                                "name": "x",
                                "type": "number",
                                "description": "Value on x-axis",
                                "example": 4.2
                              },
                              "y": {
                                "name": "y",
                                "type": "number",
                                "description": "Value on y-axis",
                                "example": 2.4
                              }
                            }
                          }
                        }
                      },
                      "minItens": 1,
                      "maxItens": 3
                    }
                  }
                }
              }
            },
            "lightness": {
              "description": "For blocks that have Lightness histogram we provide a lightness level as a [0-1] float number. Greater the value, more light is the whole image",
              "type": "number",
              "example": 0.8
            },
            "saturation": {
              "description": "For blocks that have Saturation histogram we provide a saturation level as a [0-1] float number. Greater the value, more saturated is the whole image",
              "type": "number",
              "example": 0.2
            },
            "closest_aspect": {
              "description": "For blocks that have dimensions, we try to find the closest aspect ratio, considering well known \"good\" aspects like 2:1, 1:2, 2:3 and so on",
              "type": "number",
              "example": 1
            },
            "transparent": {
              "description": "For blocks that have Alpha histogram we provide a transparecy level as a [0-1] float number. Greater the value, more transparent is the whole image. Another way to put it is: if `transparent` is greater than zero, it has at least one transparent pixel",
              "type": "number",
              "example": 1
            }
          }
        }
      }
    }
  },
  "required": [
    "type",
    "html"
  ]
}